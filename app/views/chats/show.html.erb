<%= link_to "â† #{@chat.plan.title}", plan_path(@chat.plan) %>

<div class="chat_box">
  <h1 id="chat_title" style="color: black" ><%= @chat.title %></h1>
  <div id="messages">
  <% @chat.messages.each do |message| %>
    <% if message.role == "user" %>
      <div class="d-flex justify-content-start mb-5">
        <div class="bg-white px-3 pb-0 pt-3 rounded-pill">
          <%= raw(render_markdown(message.content)) %>
        </div>
      </div>
    <% elsif message.role == "assistant" %>
      <div class="d-flex justify-content-start mb-5">
        <div class="px-3 pb-0 pt-3">
          <%= raw(render_markdown(message.content)) %>
        </div>
      </div>
    <% end %>
  <% end %>
</div>
  <div id="new_message_container">
    <%= simple_form_for [@chat, @message] do |f| %>
      <%= f.input :content, label: "Ask a question", required: true, placeholder: "" %>
      <%= f.button :submit, 'Ask AI', class: 'btn btn-primary' %>
    <% end %>
  </div>
  <%= button_to "Save Roadmap", save_roadmap_plan_path(@plan), method: :post %>
</div>
