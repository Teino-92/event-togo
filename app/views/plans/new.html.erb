<div class="box my-5 form-container" data-controller="form submit-spinner">
  <div class="form-header">
    <h1><i class="fas fa-magic"></i> Create Your Perfect Event</h1>
    <p class="form-subtitle">Tell us about your event and let AI create an amazing plan for you!</p>

    <div class="progress-container">
      <div class="progress-bar" data-form-target="progressBar"></div>
    </div>
  </div>

  <%= simple_form_for @plan,
    html: {
      data: {
        turbo: false,
        action: "submit->submit-spinner#submit"
      },
      class: "animated-form"
    } do |f| %>

    <!-- Step 1: Basic Info -->
    <div class="form-step" data-form-target="step">
      <div class="step-header">
        <span class="step-badge">1/3</span>
        <h3>Basic Information</h3>
      </div>

      <div>
        <%= f.input :theme,
          label: 'What type of event?',
          required: true,
          prompt: "Select a category",
          collection: ['Couple', 'Family', 'Friends', 'Solo'],
          input_html: {
            required: true,
            data: {
              action: "focus->form#focusIn blur->form#focusOut"
            }
          } %>
      </div>

      <div>
        <%= f.input :number_persons,
          label: 'How many people?',
          required: true,
          placeholder: "e.g., 2, 4, 10...",
          input_html: {
            required: true,
            data: {
              action: "focus->form#focusIn blur->form#focusOut"
            }
          } %>
      </div>

      <div class="form-navigation">
        <button type="button" class="button-box button-secondary" data-action="click->form#next">
          Next <i class="fas fa-arrow-right"></i>
        </button>
      </div>
    </div>

    <!-- Step 2: Location & Details -->
    <div class="form-step" data-form-target="step" style="display: none;">
      <div class="step-header">
        <span class="step-badge">2/3</span>
        <h3>Location & Details</h3>
      </div>

      <div>
        <%= f.input :city,
          label: 'Where is your event?',
          required: true,
          placeholder: 'e.g., New York, Paris, Tokyo...',
          input_html: {
            required: true,
            data: {
              action: "focus->form#focusIn blur->form#focusOut"
            }
          } %>
      </div>

      <div>
        <%= f.input :context,
          label: 'Tell us more about your event',
          required: true,
          as: :text,
          placeholder: 'e.g., Birthday celebration, romantic dinner, team building...',
          input_html: {
            required: true,
            rows: 4,
            data: {
              action: "focus->form#focusIn blur->form#focusOut"
            }
          } %>
      </div>

      <div class="form-navigation">
        <button type="button" class="button-box" data-action="click->form#previous">
          <i class="fas fa-arrow-left"></i> Previous
        </button>
        <button type="button" class="button-box button-secondary" data-action="click->form#next">
          Next <i class="fas fa-arrow-right"></i>
        </button>
      </div>
    </div>

    <!-- Step 3: Time & Date -->
    <div class="form-step" data-form-target="step" style="display: none;">
      <div class="step-header">
        <span class="step-badge">3/3</span>
        <h3>When & Duration</h3>
      </div>

      <div>
        <%= f.input :event_lenght,
          label: 'How long is your event?',
          required: true,
          prompt: 'Select duration',
          collection: ['Morning', 'Afternoon', 'Evening', 'Day', 'Week-end'],
          input_html: {
            required: true,
            data: {
              action: "focus->form#focusIn blur->form#focusOut"
            }
          } %>
      </div>

      <div>
        <%= f.input :roadmap_date,
          as: :string,
          input_html: {
            required: true,
            type: "date",
            min: Date.today.to_s,
            data: {
              action: "focus->form#focusIn blur->form#focusOut"
            }
          },
          label: "When is your event?",
          required: true %>
      </div>

      <div class="form-navigation">
        <button type="button" class="button-box" data-action="click->form#previous">
          <i class="fas fa-arrow-left"></i> Previous
        </button>
        <button type="submit"
          class="button-box button-edit"
          data-submit-spinner-target="button">
          <span data-submit-spinner-target="text">
            <i class="fas fa-magic"></i> Generate My Event Plan
          </span>
          <span data-submit-spinner-target="spinner" style="display:none;"></span>
        </button>
      </div>
    </div>

  <% end %>
</div>

